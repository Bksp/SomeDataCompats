name: Mi flujo de trabajo

on:
  push:
    branches: [ main ]

jobs:
  build_and_publish:
    runs-on: ubuntu-latest

    steps:
      - uses: actions/checkout@v3

      - name: Construir proyecto (reemplazar con su comando específico)
        run: ./build.sh

      - name: Crear archivo ZIP (reemplazar con su comando específico)
        run: zip -qr ${{ github.sha }}.zip ./dist

      - uses: actions/upload-artifact@v3
        with:
          name: ${{ github.sha }}.zip
          path: ${{ github.sha }}.zip

      - uses: actions/create-release@v1
        env:
          GITHUB_TOKEN: ${{ secrets.API_TOKEN2 }}
        with:
          tag_name: ${{ github.sha }}
          release_name: "Versión ${{ github.sha }}"
          draft: false
          prerelease: false
          body: |
            **Descripción de la release:**

            - Cambios en esta versión...
            - ...

