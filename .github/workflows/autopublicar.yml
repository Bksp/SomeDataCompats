name: Publicar lanzamiento

on:
  push:
    branches:
      - main

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout
      uses: actions/checkout@v3

    - name: Comprimir archivos en zip
      uses: montudor/action-zip@v1
      with:
        args: zip -qq -r SOMEDATACOMPATS.zip ./data ./pack.mcmeta

    - name: Crear lanzamiento
      id: create_release
      uses: actions/create-release@v1.0.0
      env:
        github-token: ${{ secrets.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 }}
      with:
        tag_name: v1.0.0
        release_name: Release v1.0.0
        draft: false
        prerelease: false

    - name: Cargar archivo adjunto al lanzamiento
      id: upload-release-asset 
      uses: actions/upload-release-asset@v1.0.0
      env:
        github-token: ${{ secrets.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 }}
      with:
        upload_url: ${{ steps.create_release.outputs.upload_url }}
        asset_path: ./SOMEDATACOMPATS.zip
        asset_name: SOMEDATACOMPATS.zip
        asset_content_type: application/zip

    - name: Publicar lanzamiento
      uses: softprops/action-gh-release@v1
      env:
        github-token: ${{ secrets.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 }}
      with:
        tag_name: v1.0.0
        release_name: Release v1.0.0
        body: Descripci√≥n del release.
