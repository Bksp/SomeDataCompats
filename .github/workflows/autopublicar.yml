name: Publicar automáticamente ZIP al confirmar

on:
  push:
    branches: [ main ]  # Solo se activa al enviar a la rama "main"

jobs:
  build_and_publish:
    runs-on: ubuntu-latest  # Se ejecuta en un runner Ubuntu reciente

    steps:
      - uses: actions/checkout@v3  # Obtiene el código del repositorio

      - name: Instalar herramienta de creación de ZIP (si es necesario)
        run: sudo apt-get update && sudo apt-get install -y zip  # Instala "zip" si no está disponible

      - name: Crear archivo ZIP
        run: zip -qr ${{ github.sha }}.zip ./data ./pack.mcmeta  # Usa el SHA de la confirmación para un nombre único

      - uses: actions/upload-artifact@v2  # Sube el artefacto ZIP
        with:
          name: ${{ github.sha }}.zip  # Coincide con el nombre del archivo ZIP
          path: ${{ github.sha }}.zip  # Especifica la ruta del archivo

      - uses: actions/create-release@v1  # Crea una versión (opcional)
        env:
          GITHUB_TOKEN: ${{ secrets.xtQ5I68mlibgYD6WHBFBQjdniLsPyP4S5DQS }}
        with:
          tag_name: ${{ github.sha }}  # Usa el SHA de la confirmación para la versión (opcional)
          release_name: "Versión ${{ github.sha }}"  # Nombre descriptivo de la versión (opcional)
          draft: false  # Publicar una versión no provisional (opcional)
          prerelease: false  # No es una versión preliminar (opcional)


